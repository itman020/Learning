1. sp_who or sp_who2
SP_WHO2 ACTIVE

2.【MS SQL】通过执行计划来分析SQL性能,如何知道一句SQL语句的执行效率呢，只知道下面3种：
1)、通过SQL语句执行时磁盘的活动量(IO)信息来分析：SET STATISTICS IO ON (开启) / SET STATISTICS IO OFF (关闭)
2)、通过SQL语句执行时语法分析、编译以及执行所消耗的时间：SET STATISTICS TIME ON (开启) / SET STATISTICS TIME OFF (关闭)
3)、通过执行计划查看：Ctrl + L

2. MS sql chinese chart
begin tran
  create table #tmptbl(
      username1 nvarchar(2) ,
	    username2 varchar(2)
  )
  insert into #tmptbl values(N'你','你')
  insert into #tmptbl values(N'你我','你我')
  select * from #tmptbl  
rolllback
go
drop table #tmptbl
go
username1	username2
你	?
你我	??

3. transation
https://docs.microsoft.com/zh-cn/sql/t-sql/functions/trancount-transact-sql

在SqlServer里，嵌套事务的层次是由@@TranCount全局变量反映出来的。

每一次Begin Transaction都会引起@@TranCount加1。而每一次Commit Transaction都会使@@TranCount减1，而RollBack Transaction会回滚所有的嵌套事务包括已经提交的事务和未提交的事务，而使@@TranCount置0。

例如: 
 BEGIN   TRAN   --@@TRANCOUNT值为0   
      SELECT  @@TRANCOUNT         --值为1   
          BEGIN   TRAN     
                SELECT  @@TRANCOUNT     --值为2    
          COMMIT   TRAN   
          SELECT @@TRANCOUNT   --值为1   
  ROLLBACK   TRAN   
  SELECT  @@TRANCOUNT   --值为0



